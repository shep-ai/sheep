# Task Breakdown (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: design-pattern-analysis
summary: >
  2 tasks across 2 phases. Phase 1 authors the complete DESIGN_PATTERN.md file.
  Phase 2 validates all success criteria.

# Relationships
relatedFeatures:
  - number: 006
    name: joke-markdown
    relationship: Same pattern — single markdown file at repo root

technologies:
  - Markdown (GitHub-flavored)
  - Python (code example only)

relatedLinks: []

# Structured task list
tasks:
  - id: task-1
    phaseId: phase-1
    title: 'Author DESIGN_PATTERN.md with complete Observer pattern analysis'
    description: >
      Create the DESIGN_PATTERN.md file at the repo root containing the full Observer
      pattern analysis. Includes all spec-required sections: H1 title with pattern name,
      Overview (intent + GoF category), Structure (participants as bullet list),
      When to Use (3+ real-world use cases), Trade-offs (2+ pros, 2+ cons),
      Code Example (single self-contained Python block using abc.ABC), and a bonus
      Related Patterns section. Target 165-240 lines within the 150-300 requirement.
    state: Todo
    dependencies: []
    acceptanceCriteria:
      - 'File exists at repo root as DESIGN_PATTERN.md'
      - 'Begins with H1 containing "Observer" and a brief subtitle (FR-2)'
      - 'Overview section explains intent and identifies behavioral GoF category (FR-3)'
      - 'Structure section lists Subject, Observer, ConcreteSubject, ConcreteObserver with roles (FR-4)'
      - 'When to Use section has at least 3 concrete real-world use cases (FR-5)'
      - 'Trade-offs section has at least 2 pros and 2 cons (FR-6)'
      - 'Code Example section contains a fenced ```python block (FR-7, FR-8)'
      - 'Python code uses abc.ABC, is self-contained, and syntactically valid (FR-8)'
      - 'Only standard GFM elements used — no HTML, no Mermaid (FR-9)'
      - 'File is between 150 and 300 lines (NFR-1)'
    tdd:
      red:
        - 'Write a validation script that checks: file exists at DESIGN_PATTERN.md, line count is 150-300, contains H1 heading, contains required H2 sections (Overview, Structure, When to Use, Trade-offs, Code Example), contains a ```python fenced code block, Python code block parses without syntax errors'
      green:
        - 'Author the complete DESIGN_PATTERN.md file following the document outline and line budget from research: title (5-10 lines), Overview (20-30), Structure (25-35), When to Use (20-30), Trade-offs (25-35), Code Example (50-70), Related Patterns (10-15)'
      refactor:
        - 'Review for clarity and tone consistency — tighten prose, ensure bullet points are parallel, verify code comments are helpful, check heading hierarchy is flat H2 under H1'
    estimatedEffort: '30min'

  - id: task-2
    phaseId: phase-2
    title: 'Validate DESIGN_PATTERN.md against all success criteria'
    description: >
      Run all validation checks to confirm the file meets every success criterion
      and functional/non-functional requirement from the spec. Verify no existing
      files were modified.
    state: Todo
    dependencies:
      - task-1
    acceptanceCriteria:
      - 'Line count verified between 150 and 300 (NFR-1)'
      - 'Python code block extracts and parses without syntax errors (FR-8)'
      - 'All required H2 sections present (FR-3 through FR-7)'
      - 'git diff shows only the new DESIGN_PATTERN.md file — no existing files modified (NFR-3)'
      - 'Markdown uses only standard GFM elements with no rendering issues (NFR-2)'
    tdd:
      red:
        - 'Run the validation script from task-1 against the authored file — expect all checks to pass'
        - 'Run `python -m py_compile` or `ast.parse` on the extracted Python code block'
        - 'Run `wc -l DESIGN_PATTERN.md` and verify output is between 150 and 300'
        - 'Run `git diff --name-only` and verify only DESIGN_PATTERN.md appears'
      green:
        - 'Fix any issues found during validation (line count, syntax errors, missing sections)'
      refactor:
        - 'Final read-through for typos, formatting consistency, and content accuracy'
    estimatedEffort: '10min'

# Total effort estimate
totalEstimate: '40min'

# Open questions
openQuestions: []

# Markdown content (the full tasks document)
content: |
  ## Summary

  This is a two-task workflow for a content-only deliverable. First, author the complete
  DESIGN_PATTERN.md file with all required sections covering the Observer pattern — intent,
  structure, use cases, trade-offs, and a Python code example. Then validate the file
  against every success criterion from the spec: line count bounds, valid Python syntax,
  required sections present, correct file placement, and no modifications to existing files.

  The TDD approach for a content task adapts naturally: the "red" phase writes validation
  checks that define what a correct file looks like, the "green" phase authors the content
  to pass those checks, and the "refactor" phase polishes prose and formatting.
