# Implementation Plan (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: state-machine-diagram-85e26c
summary: >
  Pure content task: create a single STATE_MACHINE.md file at the repository root
  containing a Mermaid stateDiagram-v2 sheep lifecycle diagram. One phase, one file,
  no code changes, no dependencies.

# Relationships
relatedFeatures:
  - joke-markdown
  - sheep-story

technologies:
  - Markdown
  - Mermaid stateDiagram-v2

relatedLinks:
  - https://mermaid.js.org/syntax/stateDiagram.html
  - https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams

# Structured implementation phases
phases:
  - id: phase-1
    name: 'Content Creation'
    description: >
      Create STATE_MACHINE.md at the repository root with a valid stateDiagram-v2
      Mermaid block, a level-1 heading, and a sheep lifecycle theme. Single atomic
      phase — no prior setup or teardown required.
    parallel: false

# File change tracking
filesToCreate:
  - STATE_MACHINE.md

filesToModify: []

# Open questions (should all be resolved before implementation)
openQuestions: []

# Markdown content (the full plan document)
content: |
  ## Architecture Overview

  This feature lives entirely in the repository root content layer alongside JOKE.md,
  JOKE2.md, SHEEP.md, and DESIGN_PATTERN.md. It has zero interaction with:
  - `src/` Python package
  - `tests/`
  - `docker-compose.yml`
  - Any CI configuration

  The new file is a pure static asset rendered by GitHub's native Mermaid support.

  ## Key Design Decisions

  ### 1. Diagram Syntax: stateDiagram-v2
  **Chosen:** `stateDiagram-v2`
  **Rationale:** Current Mermaid standard for state machines. Natively supported by
  GitHub with no plugins. Provides `[*]` pseudo-state syntax for initial/terminal
  states and `: label` notation for transition labels. The spec mandates this (FR-2,
  NFR-2); no ambiguity.

  ### 2. File Naming and Placement
  **Chosen:** `STATE_MACHINE.md` at repository root
  **Rationale:** All content files in this repo use UPPERCASE.md naming at root
  (JOKE.md, SHEEP.md, DESIGN_PATTERN.md). STATE_MACHINE.md follows this unambiguous
  convention (NFR-3). No `docs/` directory exists to justify subdirectory placement.

  ### 3. File Structure
  **Chosen:** Single `# Sheep State Machine` heading + Mermaid fenced code block
  **Rationale:** Matches the minimal terse style of JOKE.md and SHEEP.md. Diagram
  labels are self-documenting via plain English transition text (NFR-4). No prose
  body needed; adding one would contradict the "fast, no thinking" user intent and
  consume lines unnecessarily (NFR-1 cap: 30 lines).

  ### 4. State Selection
  **Chosen:** 4 named states — Grazing, Wandering, Shearing, Sleeping
  **Rationale:** All are under 20 characters (NFR-5), sheep-domain vocabulary
  consistent with SHEEP.md (FR-6), and form a coherent lifecycle loop with a natural
  terminal state. Satisfies the 4-5 state requirement (FR-4) while staying well
  within the 30-line limit (NFR-1).

  ### 5. No Mermaid Notes
  **Chosen:** Transitions only, no `note` annotations
  **Rationale:** Each note block costs 3+ lines and provides no functional value.
  Human-readable transition labels (NFR-4) make the diagram self-explanatory. KISS
  principle; consistent with the repo's minimalist content style.

  ## Implementation Strategy

  Single phase. The entire implementation is one Write operation producing ~12 lines:

  - Line 1: `# Sheep State Machine`
  - Line 2: blank
  - Lines 3-12: fenced Mermaid block with `stateDiagram-v2` directive and 7 transitions

  Diagram structure (from research artifact):
  - `[*] --> Grazing`
  - `Grazing --> Wandering : feels restless`
  - `Wandering --> Grazing : finds good grass`
  - `Wandering --> Shearing : farmer appears`
  - `Shearing --> Sleeping : exhausted after shearing`
  - `Sleeping --> Grazing : fully rested`
  - `Sleeping --> [*] : winter comes`

  ## Risk Mitigation

  | Risk | Mitigation |
  | ---- | ---------- |
  | Mermaid syntax error breaks GitHub rendering | Use exact stateDiagram-v2 syntax; validate fenced block uses ```mermaid delimiter |
  | File exceeds 30-line NFR-1 limit | Projected line count: ~12 lines. Well within limit. |
  | State name exceeds 20 characters | All four names are 7-9 characters. Far below limit. |
  | Accidentally modifying existing files | Task scope is a single new file Write; no edits defined |
