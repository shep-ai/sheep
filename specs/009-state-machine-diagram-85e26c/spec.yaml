# Feature Specification (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: state-machine-diagram-85e26c
number: 009
branch: feat/009-state-machine-diagram-85e26c
oneLiner: Create a short markdown file containing a simple state machine diagram
userQuery: >
  create simple short md file with diagram of random state machine, fast, no research, no thinking!
summary: >
  Create a single markdown file (STATE_MACHINE.md) in the repo root containing a simple
  state machine diagram using Mermaid stateDiagram-v2 syntax. The diagram illustrates a
  whimsical theme (sheep lifecycle) with 4–5 states and clearly labelled transitions.
  Pure content task — no source code, tests, or configuration changes required.
phase: Requirements
sizeEstimate: S

# Relationships
relatedFeatures:
  - joke-markdown
  - sheep-story

technologies:
  - Markdown
  - Mermaid (stateDiagram-v2)

relatedLinks: []

openQuestions:
  - question: 'What theme/domain should the state machine illustrate?'
    resolved: true
    options:
      - option: 'Sheep lifecycle (repo-themed)'
        description: >
          Uses the sheep/wool domain already established by SHEEP.md and the src/ sheep
          platform. Keeps the repo content cohesive and gives the diagram a fun,
          memorable identity that fits the existing personality of the repo.
        selected: true
      - option: 'Generic traffic light'
        description: >
          Classic pedagogical example (Red → Green → Yellow → Red). Instantly
          recognisable but completely disconnected from any project context;
          contributes no thematic value to this specific repository.
        selected: false
      - option: 'Abstract technical workflow'
        description: >
          A generic software state machine (e.g. request lifecycle). More "serious"
          but arbitrary — the repo's content files lean playful, so this would feel
          out of place.
        selected: false
    selectionRationale: >
      The repo already has a sheep story (SHEEP.md) and a Python sheep platform (src/).
      Using a sheep lifecycle theme creates narrative continuity across content files,
      makes the diagram memorable, and requires zero domain explanation. It also
      fulfils the "random state machine" ask in a charming way.
    answer: 'Sheep lifecycle (repo-themed)'

  - question: 'How many states should the diagram contain?'
    resolved: true
    options:
      - option: 'Minimal — 3 states'
        description: >
          Absolute minimum for a recognisable state machine. Very fast to write but
          may feel too sparse to demonstrate transitions meaningfully.
        selected: false
      - option: 'Small — 4–5 states'
        description: >
          Enough states to show a realistic lifecycle with multiple transitions,
          including at least one loop or branch. Balances brevity with richness.
          Fits the "simple short" constraint from the user query.
        selected: true
      - option: 'Moderate — 6–8 states'
        description: >
          Richer diagram with more branching. Risks violating the "short" constraint
          and increases diagram width/readability issues on GitHub.
        selected: false
    selectionRationale: >
      The user explicitly asked for "simple short" content. 4–5 states gives enough
      transitions to be interesting while remaining scannable in a single glance.
      It comfortably fits within the <30 line target for the whole file.
    answer: 'Small — 4–5 states'

  - question: 'Should the file include descriptive prose around the diagram?'
    resolved: true
    options:
      - option: 'Title heading only'
        description: >
          A single # or ## heading above the Mermaid block. Minimal, fast, consistent
          with the terse style of JOKE.md files. Lets the diagram speak for itself.
        selected: true
      - option: 'Heading plus short description paragraph'
        description: >
          One sentence of context below the heading. Adds slight explanation but
          also adds lines and may feel like over-engineering a trivial content file.
        selected: false
    selectionRationale: >
      The user asked for "fast, no thinking" content. A title heading is all that is
      needed for GitHub to display the file attractively. Extra prose would contradict
      the spirit of the request.
    answer: 'Title heading only'

content: |
  ## Problem Statement

  The repository currently has content files (JOKE.md, JOKE2.md, SHEEP.md) but no visual
  diagram artifacts. The request is to add a simple markdown file containing a state machine
  diagram using Mermaid syntax — a fast, no-frills content task that adds a whimsical
  sheep-themed diagram consistent with the repo's existing personality.

  ## Success Criteria

  - [ ] `STATE_MACHINE.md` exists at the repository root
  - [ ] The file follows the UPPERCASE naming convention used by JOKE.md, SHEEP.md, etc.
  - [ ] The file contains exactly one Mermaid `stateDiagram-v2` fenced code block
  - [ ] The diagram defines a valid initial state (`[*]`) and at least one terminal state (`[*]`)
  - [ ] The diagram contains between 4 and 5 named states
  - [ ] Every state has at least one labelled transition
  - [ ] The Mermaid syntax is valid and renders without errors on GitHub
  - [ ] The file is no longer than 30 lines
  - [ ] No existing files are modified

  ## Functional Requirements

  - **FR-1**: A new file named `STATE_MACHINE.md` MUST be created at the repository root.
  - **FR-2**: The file MUST contain a fenced Mermaid code block using the `stateDiagram-v2`
    directive.
  - **FR-3**: The state machine MUST include a designated initial state (`[*] --> FirstState`)
    and at least one terminal transition (`LastState --> [*]`).
  - **FR-4**: The diagram MUST contain between 4 and 5 named states (exclusive of `[*]`).
  - **FR-5**: Every named state MUST participate in at least one labelled transition
    (transition labels must be non-empty strings).
  - **FR-6**: The diagram theme MUST be the sheep lifecycle, using states such as
    `Grazing`, `Shearing`, `Sleeping`, `Wandering`, or similar sheep-domain vocabulary.
  - **FR-7**: The file MUST begin with a single level-1 or level-2 Markdown heading
    (e.g. `# Sheep State Machine`).
  - **FR-8**: No other files in the repository may be modified by this task.

  ## Non-Functional Requirements

  - **NFR-1**: The file MUST be no longer than 30 lines total (heading + blank lines +
    Mermaid block).
  - **NFR-2**: The Mermaid syntax MUST conform to the `stateDiagram-v2` specification
    so it renders natively on GitHub without plugins.
  - **NFR-3**: The file name MUST use the UPPERCASE convention (`STATE_MACHINE.md`)
    matching the existing content file naming pattern in the repo root.
  - **NFR-4**: Transition labels MUST be human-readable English phrases (not codes or
    abbreviations), ensuring the diagram is self-explanatory without additional context.
  - **NFR-5**: The diagram MUST be aesthetically legible at GitHub's default Mermaid
    rendering width — no state names longer than 20 characters.

  ## Product Questions & AI Recommendations

  | # | Question | AI Recommendation | Rationale |
  | - | -------- | ----------------- | --------- |
  | 1 | What theme should the state machine illustrate? | Sheep lifecycle (repo-themed) | Maintains narrative continuity with SHEEP.md and the src/ sheep platform; memorable and zero explanation required |
  | 2 | How many states should the diagram contain? | Small — 4–5 states | Balances richness with the "simple short" user constraint; fits in <30 lines |
  | 3 | Should the file include prose around the diagram? | Title heading only | Fastest to produce; consistent with JOKE.md terse style; diagram is self-explanatory |

  ## Affected Areas

  | Area | Impact | Reasoning |
  | ---- | ------ | --------- |
  | Repo root (new file) | Low | A new `STATE_MACHINE.md` file is added; no existing files are modified |

  ## Dependencies

  None. This is a pure content task — no source code, no libraries, no configuration.

  ## Size Estimate

  **S** — Single new markdown file with ~20 lines of content. No code changes, no tests,
  no configuration. Requirements analysis confirmed no scope expansion from the original
  estimate.
