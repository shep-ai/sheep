# Research Artifact (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: state-machine-diagram-92e7c4
summary: >
  This feature requires creating a single Markdown file (STATE_MACHINE.md) at the repo root
  containing a Mermaid stateDiagram-v2 traffic light diagram. No libraries, no code, and no
  toolchain changes are needed — the only meaningful decisions are Mermaid dialect version,
  file content structure, and naming convention, all of which align with existing repo patterns.

# Relationships
relatedFeatures: []

technologies:
  - Markdown
  - Mermaid stateDiagram-v2

relatedLinks:
  - https://mermaid.js.org/syntax/stateDiagram.html

decisions:
  - title: 'Mermaid Diagram Dialect: stateDiagram-v2 vs stateDiagram'
    chosen: 'stateDiagram-v2'
    rejected:
      - 'stateDiagram (v1) — supports fewer features, deprecated in favour of v2, and GitHub renders v2 correctly without any extra configuration'
      - 'flowchart LR — a directed graph can approximate a state machine visually but is semantically wrong; it lacks the [*] initial/final pseudo-state syntax that makes a state machine self-documenting'
    rationale: >
      stateDiagram-v2 is the current canonical Mermaid syntax for state machines and is
      natively rendered by GitHub's built-in Mermaid support. It provides the [*] initial
      pseudo-state, labelled transitions with the : separator, and clean rectangular state
      boxes — all of which produce a self-explanatory traffic light diagram with minimal markup.
      The feature spec explicitly requires stateDiagram-v2 (FR-2), so this decision is fixed.

  - title: 'File Content Structure: prose quantity around the diagram'
    chosen: 'Level-1 heading + single sentence description + fenced Mermaid block'
    rejected:
      - 'Diagram only (no prose) — removes all context; future readers cannot tell what the diagram represents without reading the Mermaid source; inconsistent with every other content file in the repo which includes at least a heading'
      - 'Title + paragraph explanation (3-5 sentences) — contradicts the user's explicit "short" and "fast" requirement and exceeds the brevity of JOKE.md, JOKE2.md, and SHEEP.md which each use minimal prose'
    rationale: >
      Every existing standalone content file at the repo root (JOKE.md, JOKE2.md, DESIGN_PATTERN.md,
      SHEEP.md) uses a level-1 heading and minimal surrounding text. A single descriptive sentence
      provides just enough context for the diagram to be self-contained while keeping the total
      line count well under the 30-line ceiling mandated by FR-7. This matches established repo
      style and satisfies the user's emphasis on brevity.

  - title: 'Filename Convention'
    chosen: 'STATE_MACHINE.md (all-caps with underscore separator)'
    rejected:
      - 'state-machine.md (lowercase kebab-case) — inconsistent with every existing standalone content file; JOKE.md, JOKE2.md, DESIGN_PATTERN.md, and SHEEP.md all use all-caps filenames'
      - 'StateMachine.md (PascalCase) — not used anywhere in the repository; would be an unexplained outlier with no precedent'
    rationale: >
      The repository has a clear, consistent naming convention for standalone root-level content
      files: ALL_CAPS with underscores separating words (.md extension). STATE_MACHINE.md follows
      this pattern exactly. Deviating without a strong technical reason would harm consistency
      and discoverability.

openQuestions: []

content: |
  ## Status

  - **Phase:** Research
  - **Updated:** 2026-02-26

  ## Technology Decisions

  ### 1. Mermaid Diagram Dialect: stateDiagram-v2 vs stateDiagram

  **Chosen:** `stateDiagram-v2`

  **Rejected:**
  - `stateDiagram` (v1) — deprecated, fewer features; no advantage over v2 for this use case
  - `flowchart LR` — semantically wrong for a state machine; lacks `[*]` pseudo-state syntax

  **Rationale:** `stateDiagram-v2` is the current Mermaid standard, natively supported by
  GitHub's renderer, and explicitly required by the feature spec (FR-2). It produces clean,
  self-documenting diagrams with labelled transitions and initial-state syntax.

  ### 2. File Content Structure

  **Chosen:** Level-1 heading + single sentence + fenced Mermaid block

  **Rejected:**
  - Diagram only — no context for readers; inconsistent with all existing content files
  - Title + paragraph — too verbose; contradicts user's "short" and "fast" requirement

  **Rationale:** Matches the concise style of JOKE.md, JOKE2.md, and SHEEP.md. A single
  sentence is sufficient to describe the diagram without padding the file beyond 30 lines.

  ### 3. Filename Convention

  **Chosen:** `STATE_MACHINE.md`

  **Rejected:**
  - `state-machine.md` — inconsistent with all-caps pattern used by existing content files
  - `StateMachine.md` — PascalCase has no precedent in this repository

  **Rationale:** Every standalone content file at the repo root uses ALL_CAPS with underscores.
  Consistency is the sole driver; there is no technical reason to deviate.

  ## Library Analysis

  | Library | Purpose | Decision | Reasoning |
  | ------- | ------- | -------- | --------- |
  | Mermaid (stateDiagram-v2) | Diagram rendering | Use (built-in via GitHub) | Zero dependencies; GitHub renders Mermaid natively in fenced code blocks; no install required |
  | Any Mermaid CLI / pre-processor | Local preview | Reject | Not needed — the file targets GitHub rendering; NFR-4 forbids build-step dependencies |

  ## Security Considerations

  None applicable. The file is a static Markdown document containing only Mermaid diagram
  syntax. It introduces no executable code, no user input, no network calls, and no
  dependencies. There are no authentication, authorization, or data-safety implications.

  ## Performance Implications

  None applicable. A ~20-line Markdown file adds negligible overhead to repository size.
  Mermaid diagrams are rendered client-side by GitHub's UI; there is no server-side processing
  or build-time cost.

  ## Architecture Notes

  This feature is purely additive — a single new file at the repository root with no
  modifications to existing files. It follows the established convention of standalone
  all-caps Markdown content files (JOKE.md, JOKE2.md, DESIGN_PATTERN.md, SHEEP.md).
  No integration with the Python source tree, tests, Docker configuration, or CI pipeline
  is required or affected.
