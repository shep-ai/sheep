# Feature Specification (YAML)
# This is the source of truth. Markdown is auto-generated from this file.

name: random-poem-generator
number: 011
branch: feat/011-random-poem-generator
oneLiner: Add RANDOM_POEM.txt with a short original poem and pytest validation tests
userQuery: >
  Feature: create random poem in single txt file short and fast!!!
summary: >
  Add a RANDOM_POEM.txt file at the repository root containing a short original poem,
  following the same content-file pattern established by RANDOM_WORD.txt and RANDOM.txt.
  Include pytest tests that validate the file's existence, content structure (multi-line
  poem), and POSIX-compliant line endings.
phase: Analysis
sizeEstimate: S

# Relationships
relatedFeatures:
  - 010-random-word-file
  - 010-random-txt-file

technologies:
  - Python
  - pytest

relatedLinks: []

# Open questions (must be resolved before implementation)
openQuestions: []

# Markdown content (the actual spec)
content: |
  ## Problem Statement

  The repository has an established pattern of adding small static content files
  (RANDOM_WORD.txt, RANDOM.txt, JOKE.md, etc.) each with corresponding pytest
  validation. This feature adds a poem variant — a short, original poem stored in
  RANDOM_POEM.txt at the repository root.

  ## Codebase Analysis

  ### Project Structure

  ```
  /
  ├── RANDOM_WORD.txt        # Single word content file (spec 010)
  ├── RANDOM.txt             # Single-line fact content file (spec 010)
  ├── JOKE.md / JOKE2.md / JOKE3.md  # Joke markdown files (specs 006-009)
  ├── SHEEP.md               # Story content file (spec 008)
  ├── tests/
  │   ├── test_random_word_file.py   # Template for new content file tests
  │   ├── test_config.py
  │   └── test_tools.py
  ├── specs/
  │   └── 011-random-poem-generator/
  └── src/sheep/             # Platform source (not touched by this feature)
  ```

  Content files live at the repo root. Test files follow `tests/test_<feature>.py`
  naming. The spec 010 RANDOM_WORD.txt feature is the closest prior art and defines
  the implementation template.

  ### Architecture Patterns

  - **Content files**: Plain static files committed directly — no code generation,
    no runtime logic. All content is hand-authored or agent-authored at commit time.
  - **Test pattern**: Each content file gets a `tests/test_<name>.py` module with
    three canonical test functions:
      1. `test_file_exists()` — path assertion
      2. `test_file_<content_shape>()` — structural content assertion
      3. `test_file_ends_with_single_lf()` — POSIX line-ending compliance
  - **POSIX compliance**: Files must end with exactly one `\n`, no `\r\n`.
  - **Encoding**: UTF-8 throughout.

  ### Relevant Technologies

  - **Python / pathlib**: Tests use `Path(__file__).parent.parent` to resolve
    `REPO_ROOT` and locate content files.
  - **pytest**: Test runner configured via `pyproject.toml` (`testpaths = ["tests"]`,
    `asyncio_mode = "auto"`). No special plugins needed for file tests.

  ## Affected Areas

  | Area | Impact | Reasoning |
  | ---- | ------ | --------- |
  | `RANDOM_POEM.txt` (new, repo root) | High | Primary deliverable — the poem content file |
  | `tests/test_random_poem_file.py` (new) | High | pytest validation following spec 010 pattern |
  | No existing files modified | None | Feature is purely additive |

  ## Dependencies

  - **RANDOM_WORD.txt pattern (spec 010)**: `tests/test_random_word_file.py` serves
    as the direct template for the new test module.
  - **pytest** (already installed via `pyproject.toml` dev dependencies).
  - No new libraries or infrastructure required.

  ## Size Estimate

  **S** — This is a purely additive, content-only feature. It requires:
  1. Authoring a short poem (~4–12 lines) and writing it to `RANDOM_POEM.txt`.
  2. Creating `tests/test_random_poem_file.py` with ~20 lines of pytest code modelled
     directly on the existing `test_random_word_file.py`.

  No source code changes, no dependency changes, no CI changes. Complexity is
  minimal; the main creative effort is writing the poem itself.
